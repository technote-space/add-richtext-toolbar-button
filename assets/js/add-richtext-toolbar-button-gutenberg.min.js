/*!
 * add-richtext-toolbar-button-gutenberg 0.0.1
 * Copyright (c) 2019 technote-space <technote.space@gmail.com> (https://technote.space)
 * License: GPL-3.0
 */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="add-richtext-toolbar-button",o=artb_params.default_icon;t.pluginName=r,t.namePrefix="add-richtext-toolbar-button",t.classNamePrefix="add-richtext-toolbar-button",t.fillName="RichText.ToolbarControls",t.iconSize=20,t.defaultIcon=o,t.storeName="add-richtext-toolbar-button",t.ADD_FORMAT_TYPE="@@add-richtext-toolbar-button/ADD_FORMAT_TYPE",t.ADD_CONTROL="@@add-richtext-toolbar-button/ADD_CONTROL"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getControlName=function(e){return r.pluginName+"/"+r.namePrefix+e},t.getNavItemTitleWrapperClass=function(){return r.classNamePrefix+"-nav-item-title-wrapper"},t.getNavItemTitleClass=function(e){return e+" "+r.classNamePrefix+"-nav-item-title"},t.getNavItemClass=function(e){return e+" "+r.classNamePrefix+"-nav-item"},t.getToolbarItem=function(e,t,n){var i=void 0;if(n.length>1)i=wp.element.createElement(a.default,function(e,t,n){var a=r.classNamePrefix+"-dropdown"+(e?" "+r.classNamePrefix+"-is-active":"");return{icon:(0,o.default)({icon:n[0].icon}),label:t,controls:n,className:a,navClassName:r.classNamePrefix+"-nav"}}(e,t,n));else{var l=n[0];l.extraProps={tooltip:l.title},l.title=l.originalTitle,i=wp.element.createElement(s,l)}return function(e){return wp.element.createElement(c,{name:r.fillName},e)}(i)};var r=n(0),o=i(n(2)),a=i(n(6));function i(e){return e&&e.__esModule?e:{default:e}}var l=window.wp.components,s=l.ToolbarButton,c=l.Fill},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=t.icon;if(s(n)&&(l(n)||/^data:image/.test(n)))return wp.element.createElement(a,{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:r.iconSize+"px",height:r.iconSize+"px",viewBox:"0 0 "+r.iconSize+" "+r.iconSize,"enable-background":"new 0 0 "+r.iconSize+" "+r.iconSize},wp.element.createElement("image",{width:r.iconSize,height:r.iconSize,x:"0",y:"0",xlinkHref:n}));if(s(n)&&/^dashicons-/.test(n))return wp.element.createElement(i,{icon:n.replace(/^dashicons-/,"")});if(!n&&r.defaultIcon)return e({icon:r.defaultIcon,iconSize:r.iconSize});if(!n)return null;return n};var r=n(0),o=window.wp.components,a=o.SVG,i=o.Dashicon,l=window.wp.url.isURL,s=window.lodash.isString},function(e,t,n){"use strict";var r=n(4);Object.keys(artb_params.settings).forEach(function(e){var t=artb_params.settings[e];(0,r.registerFormatType)(t.id,t.title,t.options.class_name,t.options.tag_name,t.options.icon,t.options.group_name)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerFormatType=void 0;var r=n(5);Object.defineProperty(t,"registerFormatType",{enumerable:!0,get:function(){return r.registerFormatType}}),n(8)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerFormatType=function(e,t,n,a,s,c){a||(a="span");i(o.storeName).addFormatType(e,c,t,a,n,s),window.wp.richText.registerFormatType((0,r.getControlName)(e),{title:t,tagName:a,className:n,edit:function(t){return i(o.storeName).addControl(e,t),l(o.storeName).isLast(e)?(0,r.getToolbarItem)(l(o.storeName).isActive(e),c,l(o.storeName).getControls(e)):null}})};var r=n(1),o=n(0),a=wp.data,i=a.dispatch,l=a.select},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(7),a=(r=o)&&r.__esModule?r:{default:r};var i=window.lodash,l=i.flatMap,s=i.filter,c=window.wp.components,u=c.Dropdown,p=c.IconButton,d=c.NavigableMenu;t.default=function(e){var t=e.icon,n=e.label,r=e.menuLabel,o=e.controls,i=e.className,c=e.navClassName;if(!o||!o.length)return null;var m=o;Array.isArray(m[0])||(m=[m]);var f=0===s(l(m,function(e){return e}),function(e){return!e.isDisabled}).length;return wp.element.createElement(u,{className:(0,a.default)("components-dropdown-menu",i),contentClassName:"components-dropdown-menu__popover",focusOnMount:!1,position:"top right",renderToggle:function(e){var r=e.isOpen,o=e.onToggle;return wp.element.createElement(p,{className:"components-dropdown-menu__toggle",icon:t,onClick:o,"aria-haspopup":"true","aria-expanded":r,label:n,tooltip:n,disabled:f},wp.element.createElement("span",{className:"components-dropdown-menu__indicator"}))},renderContent:function(e){var t=e.onClose;return f?(t(),null):wp.element.createElement(d,{className:(0,a.default)("components-dropdown-menu__menu",c),role:"menu","aria-label":r},l(m,function(e,t){return e.map(function(e,n){return wp.element.createElement(p,{key:[t,n].join(),onClick:function(t){t.stopPropagation(),e.onClick&&e.onClick()},className:(0,a.default)("components-dropdown-menu__menu-item",{"has-separator":t>0&&0===n,"is-active":e.isActive},e.className),icon:e.icon,role:"menuitem",disabled:e.isDisabled},e.title)})}))}})}},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)&&r.length){var i=o.apply(null,r);i&&e.push(i)}else if("object"===a)for(var l in r)n.call(r,l)&&r[l]&&e.push(l)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";var r=l(n(9)),o=l(n(10)),a=l(n(11)),i=n(0);function l(e){return e&&e.__esModule?e:{default:e}}(0,wp.data.registerStore)(i.storeName,{reducer:r.default,selectors:o.default,actions:a.default})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),a=n(1),i=n(2),l=(r=i)&&r.__esModule?r:{default:r};var s=window.wp.richText.toggleFormat,c=window.wp.element.createElement;t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{formatTypes:{},controls:{},groups:{},isActive:{}},t=arguments[1];switch(t.type){case o.ADD_FORMAT_TYPE:var n=(0,a.getControlName)(t.payload.id),r=t.payload.group?t.payload.group:"";if(e.groups[n]=r,e.formatTypes[r]||(e.formatTypes[r]={}),n in e.formatTypes[r])return void window.console.error("duplicated id");var i=c(t.payload.tagName,{className:(0,a.getNavItemTitleClass)(t.payload.className)},t.payload.title);return e.formatTypes[r][n]={index:Object.keys(e.formatTypes[r]).length,id:t.payload.id,group:r,title:t.payload.title,controlTitle:wp.element.createElement("div",{className:(0,a.getNavItemTitleWrapperClass)()},i),tagName:t.payload.tagName,className:t.payload.className,icon:t.payload.icon},e;case o.ADD_CONTROL:var u=(0,a.getControlName)(t.payload.id),p=e.groups[u],d=e.formatTypes[p][u];return 0===d.index&&(e.controls[p]=[],e.isActive[p]=!1),e.isActive[p]|=t.payload.args.isActive,e.controls[p].push({title:d.controlTitle,originalTitle:d.title,icon:(0,l.default)({icon:d.icon}),className:(0,a.getNavItemClass)(d.className),isActive:t.payload.args.isActive,isDisabled:!t.payload.args.isActive&&t.payload.args.value.start===t.payload.args.value.end,onClick:function(){t.payload.args.onChange(s(t.payload.args.value,{type:u}))}}),e;default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);function o(e,t){var n=e.groups,o=e.formatTypes,a=e.controls,i=e.isActive,l=(0,r.getControlName)(t),s=n[l];return{name:l,group:s,setting:o[s][l],formatTypes:o,controls:a,isActive:i}}t.default={isLast:function(e,t){var n=o(e,t),r=n.formatTypes,a=n.group,i=n.setting;return Object.keys(r[a]).length-1===i.index},isActive:function(e,t){var n=o(e,t),r=n.isActive;return r[n.group]},getControls:function(e,t){var n=o(e,t);return n.controls[n.group]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={addFormatType:function(e,t,n,o,a,i){return{type:r.ADD_FORMAT_TYPE,payload:{id:e,group:t,title:n,tagName:o,className:a,icon:i}}},addControl:function(e,t){return{type:r.ADD_CONTROL,payload:{id:e,args:t}}}}}]);
/*!
 * add-richtext-toolbar-button-gutenberg 0.0.1
 * Copyright (c) 2019 technote-space <technote.space@gmail.com> (https://technote.space)
 * License: GPL-3.0
 */!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=5)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="add-richtext-toolbar-button",a=artb_params.default_icon;t.pluginName=n,t.namePrefix="add-richtext-toolbar-button",t.classNamePrefix="add-richtext-toolbar-button",t.fillName="RichText.ToolbarControls",t.iconSize=20,t.defaultIcon=a,t.storeName="add-richtext-toolbar-button",t.ADD_FORMAT_TYPE="@@add-richtext-toolbar-button/ADD_FORMAT_TYPE",t.ADD_CONTROL="@@add-richtext-toolbar-button/ADD_CONTROL"},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getControlName=y,t.getNavItemTitleWrapperClass=function(){return n.classNamePrefix+"-nav-item-title-wrapper"},t.getNavItemTitleClass=function(e){return e+" "+n.classNamePrefix+"-nav-item-title"},t.getNavItemClass=function(e){return e+" "+n.classNamePrefix+"-nav-item"},t.getToolbarItem=_,t.addFormatType=function(e,t,o,a,r,l,i){c(n.storeName).addFormatType(e,t,o,a,r,l,i)},t.getRegisterFormatTypeProps=function(e,t,o,a,r,l){var i={title:o,tagName:a,className:r};l&&(i.attributes={style:"style"});return i.edit=function(o){return c(n.storeName).addControl(e,o),u(n.storeName).isLast(e)?_(e,t,o,l):null},i};var n=o(0),a=i(o(3)),r=i(o(8)),l=i(o(9));function i(e){return e&&e.__esModule?e:{default:e}}var s=wp.data,c=s.dispatch,u=s.select,p=wp.richText,m=p.applyFormat,f=p.removeFormat,d=p.getActiveFormat,v=wp.components,g=v.ToolbarButton,b=v.Fill;function y(e){return n.pluginName+"/"+n.namePrefix+e}function _(e,t,o,i){var s=u(n.storeName).isActive(e),c=u(n.storeName).getControls(e),p=void 0;if(c.length>1)p=wp.element.createElement(r.default,function(e,t,o){var r=n.classNamePrefix+"-dropdown"+(e?" "+n.classNamePrefix+"-is-active":"");return{icon:(0,a.default)({icon:o[0].icon}),label:t,controls:o,className:r,navClassName:n.classNamePrefix+"-nav"}}(s,t,c));else{var d=c[0];if(d.extraProps={tooltip:d.title},d.title=d.originalTitle,i){var v=y(e);p=wp.element.createElement(l.default,function(e,t,o,r,l,i){var s=n.classNamePrefix+"-dropdown"+(e?" "+n.classNamePrefix+"-is-active":"");return{icon:(0,a.default)({icon:l.icon}),label:l.title,tooltip:l.extraProps.tooltip,color:C(e,t,o,i.value,r),disabled:l.isDisabled,className:s,navClassName:n.classNamePrefix+"-nav",onChange:function(e){e?i.onChange(m(i.value,{type:r,attributes:{style:o+":"+e}})):i.onChange(f(i.value,r))}}}(s,e,i,v,d,o))}else p=wp.element.createElement(g,d)}return function(e){return wp.element.createElement(b,{name:n.fillName},e)}(p)}function C(e,t,o,n,a){if(!e)return!1;var r=d(n,a);if(!r)return!1;var l=r.attributes.style;return!!l&&l.replace(new RegExp("^"+o+":\\s*"),"")}},function(e,t,o){var n;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var o={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)&&n.length){var l=a.apply(null,n);l&&e.push(l)}else if("object"===r)for(var i in n)o.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var o=t.icon;if(s(o)&&(i(o)||/^data:image/.test(o)))return wp.element.createElement(r,{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:n.iconSize+"px",height:n.iconSize+"px",viewBox:"0 0 "+n.iconSize+" "+n.iconSize,"enable-background":"new 0 0 "+n.iconSize+" "+n.iconSize},wp.element.createElement("image",{width:n.iconSize,height:n.iconSize,x:"0",y:"0",xlinkHref:o}));if(s(o)&&/^dashicons-/.test(o))return wp.element.createElement(l,{icon:o.replace(/^dashicons-/,"")});if(!o&&n.defaultIcon)return e({icon:n.defaultIcon,iconSize:n.iconSize});if(!o)return null;return o};var n=o(0),a=wp.components,r=a.SVG,l=a.Dashicon,i=wp.url.isURL,s=window.lodash.isString},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();var a=wp.components.Popover,r=wp.element,l=r.Component,i=r.createRef,s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.toggle=e.toggle.bind(e),e.close=e.close.bind(e),e.closeIfClickOutside=e.closeIfClickOutside.bind(e),e.onClosable=e.onClosable.bind(e),e.offClosable=e.offClosable.bind(e),e.containerRef=i(),e.state={isOpen:!1,isClosable:!0},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l),n(t,[{key:"componentWillUnmount",value:function(){var e=this.state.isOpen,t=this.props.onToggle;e&&t&&t(!1)}},{key:"componentDidUpdate",value:function(e,t){var o=this.state.isOpen,n=this.props.onToggle;t.isOpen!==o&&n&&n(o)}},{key:"toggle",value:function(){this.setState(function(e){return{isOpen:!e.isOpen}})}},{key:"closeIfClickOutside",value:function(e){this.state.isClosable&&!this.containerRef.current.contains(e.target)&&this.close()}},{key:"close",value:function(){this.setState({isOpen:!1})}},{key:"onClosable",value:function(){this.setState({isClosable:!0})}},{key:"offClosable",value:function(){this.setState({isClosable:!1})}},{key:"render",value:function(){var e=this.state.isOpen,t=this.props,o=t.renderContent,n=t.renderToggle,r=t.position,l=void 0===r?"bottom":r,i=t.className,s=t.contentClassName,c=t.expandOnMobile,u=t.headerTitle,p=t.focusOnMount,m={isOpen:e,onToggle:this.toggle,onClose:this.close,onClosable:this.onClosable,offClosable:this.offClosable};return wp.element.createElement("div",{className:i,ref:this.containerRef},n(m),e&&wp.element.createElement(a,{className:s,position:l,onClose:this.close,onClickOutside:this.closeIfClickOutside,expandOnMobile:c,headerTitle:u,focusOnMount:p},o(m)))}}]),t}();t.default=s},function(e,t,o){"use strict";var n=o(6);Object.keys(artb_params.settings).forEach(function(e){var t=artb_params.settings[e];(0,n.registerFormatType)(t.id,t.title,t.options.class_name,t.options.tag_name,t.options.icon,t.options.group_name,t.options.style)})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerFormatType=void 0;var n=o(7);Object.defineProperty(t,"registerFormatType",{enumerable:!0,get:function(){return n.registerFormatType}}),o(11)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerFormatType=function(e,t,o,a,r,l,i){a||(a="span");(0,n.addFormatType)(e,l,t,a,o,r,i),wp.richText.registerFormatType((0,n.getControlName)(e),(0,n.getRegisterFormatTypeProps)(e,l,t,a,o,i))};var n=o(1)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=o(2),r=(n=a)&&n.__esModule?n:{default:n};var l=window.lodash,i=l.flatMap,s=l.filter,c=wp.components,u=c.Dropdown,p=c.IconButton,m=c.NavigableMenu;t.default=function(e){var t=e.icon,o=e.label,n=e.menuLabel,a=e.controls,l=e.className,c=e.navClassName;if(!a||!a.length)return null;var f=a;Array.isArray(f[0])||(f=[f]);var d=0===s(i(f,function(e){return e}),function(e){return!e.isDisabled}).length;return wp.element.createElement(u,{className:(0,r.default)("components-dropdown-menu",l),contentClassName:"components-dropdown-menu__popover",focusOnMount:!1,position:"top right",renderToggle:function(e){var n=e.isOpen,a=e.onToggle;return wp.element.createElement(p,{className:"components-dropdown-menu__toggle",icon:t,onClick:a,"aria-haspopup":"true","aria-expanded":n,label:o,tooltip:o,disabled:d},wp.element.createElement("span",{className:"components-dropdown-menu__indicator"}))},renderContent:function(e){var t=e.onClose;return d?(t(),null):wp.element.createElement(m,{className:(0,r.default)("components-dropdown-menu__menu",c),role:"menu","aria-label":n},i(f,function(e,t){return e.map(function(e,o){return wp.element.createElement(p,{key:[t,o].join(),onClick:function(t){t.stopPropagation(),e.onClick&&e.onClick()},className:(0,r.default)("components-dropdown-menu__menu-item",{"has-separator":t>0&&0===o,"is-active":e.isActive},e.className),icon:e.icon,role:"menuitem",disabled:e.isDisabled},e.title)})}))}})}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(o(2)),a=l(o(10)),r=l(o(4));function l(e){return e&&e.__esModule?e:{default:e}}var i=wp.data.select,s=wp.components,c=s.IconButton,u=s.NavigableMenu;t.default=function(e){var t=e.icon,o=e.label,l=e.tooltip,s=void 0===l?o:l,p=e.color,m=e.colors,f=e.disabled,d=e.menuLabel,v=void 0===d?"color palette":d,g=e.className,b=void 0===g?"":g,y=e.navClassName,_=void 0===y?"":y,C=e.onChange;if(!m){var w=i("core/editor").getEditorSettings();m=w.colors}return wp.element.createElement(r.default,{className:(0,n.default)("components-dropdown-menu",b),contentClassName:"components-dropdown-menu__popover color-palette-control__popover",focusOnMount:!1,position:"top right",renderToggle:function(e){var n=e.isOpen,a=e.onToggle;return wp.element.createElement(c,{className:"components-dropdown-menu__toggle",icon:t,onClick:a,"aria-haspopup":"true","aria-expanded":n,label:o,tooltip:s,disabled:f})},renderContent:function(e){var t=e.onClose,o=e.onClosable,r=e.offClosable;return wp.element.createElement(u,{className:(0,n.default)("components-dropdown-menu__menu",_),role:"menu","aria-label":v},wp.element.createElement(a.default,{colors:m,value:p,onChange:function(e){C(e)},onClose:t,onClosable:o,offClosable:r}))}})}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.colors,o=e.disableCustomColors,r=void 0!==o&&o,i=e.value,u=e.onChange,d=e.onClose,v=e.onClosable,g=e.offClosable,b=e.className;function y(e){return function(){return u(i===e?void 0:e)}}var _=s("Custom color picker"),C=(0,n.default)("components-color-palette",b);return wp.element.createElement("div",{className:C},l(t,function(e){var t=e.color,o=e.name,a={color:t},r=(0,n.default)("components-color-palette__item",{"is-active":i===t});return wp.element.createElement("div",{key:t,className:"components-color-palette__item-wrapper"},wp.element.createElement(m,{text:o||c(s("Color code: %s"),t)},wp.element.createElement("button",{type:"button",className:r,style:a,onClick:y(t),"aria-label":o?c(s("Color: %s"),o):c(s("Color code: %s"),t),"aria-pressed":i===t})))}),!r&&wp.element.createElement(a.default,{className:"components-color-palette__item-wrapper components-color-palette__custom-color",contentClassName:"components-color-palette__picker",renderToggle:function(e){var t=e.isOpen,o=e.onToggle;return wp.element.createElement(m,{text:_},wp.element.createElement("button",{type:"button","aria-expanded":t,className:"components-color-palette__item",onClick:function(){t?v():g(),o()},"aria-label":_},wp.element.createElement("span",{className:"components-color-palette__custom-color-gradient"})))},renderContent:function(){return wp.element.createElement(f,{color:i,onChangeComplete:function(e){return u(e.hex)},disableAlpha:!0})}}),wp.element.createElement(p,{className:"components-color-palette__close",type:"button",onClick:function(){d()},isSmall:!0,isDefault:!0},s("Close")),wp.element.createElement(p,{className:"components-color-palette__clear",type:"button",onClick:function(){return u(void 0)},isSmall:!0,isDefault:!0},s("Clear")))};var n=r(o(2)),a=r(o(4));function r(e){return e&&e.__esModule?e:{default:e}}var l=window.lodash.map,i=wp.i18n,s=i.__,c=i.sprintf,u=wp.components,p=u.Button,m=u.Tooltip,f=u.ColorPicker},function(e,t,o){"use strict";var n=i(o(12)),a=i(o(13)),r=i(o(14)),l=o(0);function i(e){return e&&e.__esModule?e:{default:e}}(0,wp.data.registerStore)(l.storeName,{reducer:n.default,selectors:a.default,actions:r.default})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=o(0),r=o(1),l=o(3),i=(n=l)&&n.__esModule?n:{default:n};var s=wp.richText.toggleFormat,c=wp.element.createElement;t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{formatTypes:{},controls:{},groups:{},isActive:{}},t=arguments[1];switch(t.type){case a.ADD_FORMAT_TYPE:var o=(0,r.getControlName)(t.payload.id),n=(t.payload.style?t.payload.style+"-style/":"none/")+(t.payload.group?t.payload.group:"");if(e.groups[o]=n,e.formatTypes[n]||(e.formatTypes[n]={}),o in e.formatTypes[n])return void window.console.error("duplicated id");var l={index:Object.keys(e.formatTypes[n]).length,id:t.payload.id,group:n,title:t.payload.title,tagName:t.payload.tagName,className:t.payload.className,icon:t.payload.icon,style:t.payload.style},u=c(t.payload.tagName,{className:(0,r.getNavItemTitleClass)(t.payload.className)},t.payload.title);return l.controlTitle=wp.element.createElement("div",{className:(0,r.getNavItemTitleWrapperClass)()},u),e.formatTypes[n][o]=l,e;case a.ADD_CONTROL:var p=(0,r.getControlName)(t.payload.id),m=e.groups[p],f=e.formatTypes[m][p],d=t.payload.args;return 0===f.index&&(e.controls[m]=[],e.isActive[m]=!1),e.isActive[m]|=d.isActive,e.controls[m].push({title:f.controlTitle,originalTitle:f.title,icon:(0,i.default)({icon:f.icon}),className:(0,r.getNavItemClass)(f.className),isActive:d.isActive,isDisabled:!d.isActive&&d.value.start===d.value.end,onClick:function(){d.onChange(s(d.value,{type:p}))}}),e;default:return e}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(1);function a(e,t){var o=e.groups,a=e.formatTypes,r=e.controls,l=e.isActive,i=(0,n.getControlName)(t),s=o[i];return{name:i,group:s,setting:a[s][i],formatTypes:a,controls:r,isActive:l}}t.default={isLast:function(e,t){var o=a(e,t),n=o.formatTypes,r=o.group,l=o.setting;return Object.keys(n[r]).length-1===l.index},isActive:function(e,t){var o=a(e,t),n=o.isActive;return n[o.group]},getControls:function(e,t){var o=a(e,t);return o.controls[o.group]}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0);t.default={addFormatType:function(e,t,o,a,r,l,i){return{type:n.ADD_FORMAT_TYPE,payload:{id:e,group:t,title:o,tagName:a,className:r,icon:l,style:i}}},addControl:function(e,t){return{type:n.ADD_CONTROL,payload:{id:e,args:t}}}}}]);